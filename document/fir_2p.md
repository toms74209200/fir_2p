# 2のべき乗を係数としたFIRフィルタの設計

FIRフィルタは入力信号に係数列を乗じ, その移動平均を出力として得る. 係数列は絶対値が1よりも小さいため, この演算では小数点演算が必要となる. そのため乗算器を多数消費し, これがハードウェアでの演算において障壁となる. そこでこの係数列を2のべき乗に置き換えることで, 乗算器の消費を抑えられると予想できる. 本研究では係数列を2のべき乗に置き換え, それによる伝達関数の変化について調べた.

## 係数列の導出

係数列にはハミング窓を選択した. 係数列の置き換えには最小二乗法による近似を用いた. この2のべき乗への置き換えで有効数字の桁数が決まる. ビット幅によって置き換え時の誤差が決まる.

これら係数列の導出はC言語でプログラミングした.

## 伝達関数の評価

前述より係数列の誤差はビット幅に依存することが分かった. また伝達関数はタップ数によって利得が変化する. そのためビット幅とタップ数に注目して伝達関数の評価を行う.

伝達関数の評価にはmaximaを用いた.

評価のパターンは以下の4通りである.

|      | ビット幅 | タップ数 |
| ---- | -------- | -------- |
| 1    | 12       | 31       |
| 2    | 16       | 31       |
| 3    | 12       | 101      |
| 4    | 16       | 101      |

伝達関数のグラフを以下に示す.

![h_1](./fig/h_1.png)
[図1](fig:h_1)

![h_2](./fig/h_2.png)
[図2](fig:h_2)

![h_3](./fig/h_3.png)
[図3](fig:h_3)

![h_4](./fig/h_4.png)
[図4](fig:h_4)

[図1](fig:h_1)と[図2](fig:h_2)との比較からビット幅は伝達関数の利得には影響しないことがわかる. また[図1](fig:h_3)と[図3](fig:h_3)を比較すると[図3](fig:h_3)では通過域でリップルが大きくなっていることがわかる. これは係数列の誤差の影響で, タップ数が増えることで各係数の誤差がリップルとして表れているためである. また阻止域でも[図3](fig:h_3)のリップルは大きく, 結果的に利得はあまり増えていない.

